:80 {
    # Redirect HTTP to HTTPS
    header Location "https://{host}{uri}"
    respond 302
}

workout.davishousehold.com:443 {
    reverse_proxy app:5000
    tls /etc/caddy/certs/workout.davishousehold.com.pem /etc/caddy/certs/workout.davishousehold.com-key.pem
}

# Fallback for localhost development
localhost:443 {
    reverse_proxy app:5000
    tls internal
}
